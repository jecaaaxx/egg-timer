<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Viral Cute Egg Timer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      transition: background 0.5s;
    }

    /* Themes */
    body.pink { background: #ffe4ef; }
    body.purple { background: #f3e8ff; }
    body.blue { background: #e0f2fe; }

    /* Egg */
    .egg {
      width: 150px;
      height: 190px;
      border-radius: 50% 50% 45% 45%;
      background: #fff;
      border: 4px solid #ff8fb8;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(255, 143, 184, 0.4);
    }

    .fill {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 0%;
      background: linear-gradient(#ff7eb3, #ff4f91);
      transition: height 0.5s linear;
    }

    /* Face */
    .face {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      font-size: 28px;
      z-index: 5;
    }

    /* Floating hearts */
    .heart {
      position: fixed;
      font-size: 18px;
      animation: floatUp 3s linear forwards;
      pointer-events: none;
    }

    @keyframes floatUp {
      from { transform: translateY(0); opacity: 1; }
      to { transform: translateY(-120px); opacity: 0; }
    }

    .btn {
      background: #ff7eb3;
      color: white;
      padding: 6px 12px;
      border-radius: 10px;
      font-weight: 600;
      transition: 0.2s;
    }

    .btn:hover { transform: scale(1.05); }

    .control {
      padding: 8px 16px;
      border-radius: 12px;
      font-weight: 600;
      color: white;
      transition: 0.2s;
    }

    .record .controls,
    .record .presets,
    .record .themes,
    .record .music-btn {
      display: none;
    }
  </style>
</head>

<body class="pink min-h-screen flex items-center justify-center">

<div class="bg-white rounded-3xl shadow-2xl p-7 w-full max-w-sm text-center">

  <h1 class="text-3xl font-bold text-pink-500 mb-1">ðŸ¥š Cute Egg Timer</h1>
  <p id="message" class="text-pink-400 mb-3">Ready to cook ðŸ’•</p>

  <!-- Egg -->
  <div class="flex justify-center mb-4">
    <div class="egg">
      <div id="fill" class="fill"></div>
      <div id="face" class="face">ðŸ˜´</div>
    </div>
  </div>

  <!-- Display -->
  <div id="display" class="text-4xl font-mono text-pink-600 mb-4">05:00</div>

  <!-- Presets -->
  <div class="presets grid grid-cols-3 gap-2 mb-4">
    <button onclick="setTime(180)" class="btn">Soft</button>
    <button onclick="setTime(300)" class="btn">Medium</button>
    <button onclick="setTime(420)" class="btn">Hard</button>
  </div>

  <!-- Controls -->
  <div class="controls flex gap-2 justify-center mb-3">
    <button onclick="startTimer()" class="control bg-green-400">Start</button>
    <button onclick="pauseTimer()" class="control bg-yellow-400">Pause</button>
    <button onclick="resetTimer()" class="control bg-red-400">Reset</button>
  </div>

  <!-- Themes -->
  <div class="themes flex gap-2 justify-center mb-3">
    <button onclick="setTheme('pink')" class="btn">ðŸ’—</button>
    <button onclick="setTheme('purple')" class="btn">ðŸ’œ</button>
    <button onclick="setTheme('blue')" class="btn">ðŸ’™</button>
  </div>

  <!-- Extra -->
  <div class="flex justify-center gap-2">
    <button onclick="toggleMusic()" class="btn music-btn">ðŸŽµ</button>
    <button onclick="toggleRecord()" class="btn">ðŸŽ¬</button>
  </div>

  <!-- Streak -->
  <p id="streak" class="mt-3 text-sm text-pink-400">ðŸ”¥ Streak: 0</p>

</div>

<audio id="alarm" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
<audio id="music" loop src="https://cdn.pixabay.com/audio/2022/10/16/audio_2a5f5f14b2.mp3"></audio>

<script>
let totalTime = 300;
let timeLeft = 300;
let timer = null;
let streak = localStorage.getItem('streak') || 0;
let recordMode = false;

const display = document.getElementById("display");
const fill = document.getElementById("fill");
const alarm = document.getElementById("alarm");
const face = document.getElementById("face");
const message = document.getElementById("message");
const music = document.getElementById("music");
const streakEl = document.getElementById("streak");

streakEl.textContent = "ðŸ”¥ Streak: " + streak;

function updateDisplay() {
  const m = Math.floor(timeLeft / 60);
  const s = timeLeft % 60;

  display.textContent =
    String(m).padStart(2, "0") + ":" +
    String(s).padStart(2, "0");

  const percent = ((totalTime - timeLeft) / totalTime) * 100;
  fill.style.height = percent + "%";

  updateFace();
}

function updateFace() {
  const p = timeLeft / totalTime;

  if (p > 0.7) face.textContent = "ðŸ˜´";
  else if (p > 0.4) face.textContent = "ðŸ™‚";
  else if (p > 0.1) face.textContent = "ðŸ˜";
  else face.textContent = "ðŸ¥³";
}

function setTime(sec) {
  if (timer) return;
  totalTime = sec;
  timeLeft = sec;
  updateDisplay();
}

function startTimer() {
  if (timer) return;

  message.textContent = "Cooking... bestie ðŸ’–";

  timer = setInterval(() => {
    if (timeLeft > 0) {
      timeLeft--;
      updateDisplay();
      spawnHeart();
    } else {
      clearInterval(timer);
      timer = null;

      alarm.play();
      message.textContent = "Eggcellent! ðŸ¥šâœ¨";

      streak++;
      localStorage.setItem('streak', streak);
      streakEl.textContent = "ðŸ”¥ Streak: " + streak;
    }
  }, 1000);
}

function pauseTimer() {
  clearInterval(timer);
  timer = null;
  message.textContent = "Paused ðŸ’­";
}

function resetTimer() {
  clearInterval(timer);
  timer = null;

  totalTime = 300;
  timeLeft = 300;

  fill.style.height = "0%";
  message.textContent = "Ready again ðŸ’•";

  updateDisplay();
}

function spawnHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = "ðŸ’–";

  heart.style.left = Math.random() * window.innerWidth + "px";
  heart.style.bottom = "20px";

  document.body.appendChild(heart);

  setTimeout(() => heart.remove(), 3000);
}

function setTheme(t) {
  document.body.className = t + " min-h-screen flex items-center justify-center";
}

function toggleMusic() {
  if (music.paused) music.play();
  else music.pause();
}

function toggleRecord() {
  recordMode = !recordMode;
  document.body.classList.toggle("record");
}

updateDisplay();
</script>

</body>
</html>
